import"../chunks/DsnmJJEf.js";import{R as ne,b as g,p as Z,F as K,a as M,m as w,G as ke,c as E,v as A,D as Q,f as T,d as $,r as x,s as R,t as ee,e as te,S as he,H as Fe,T as we,U as Se,V as Re,C as Le,W as ze,$ as qe}from"../chunks/CtnLPeUy.js";import{j as Me,r as ae,p as re,e as D,g as J,s as G,i as Y,D as Ie,k as Pe,F as ge,L as ve,a as U,d as pe,C as me,S as Ae,G as Ke,b as Ge,c as Te,B as Ve,f as je}from"../chunks/Dz5zFa31.js";import{m as oe,I as se,n as Ne,o as le,p as Ue,q as Ce,u as De,v as Ze,w as Ee,S as He,x as Oe,y as We,z as be,A as xe,e as $e,B as Qe,E as Ye,G as Je,P as Xe,h as et,N as tt,H as st,J as nt,b as fe,f as at,K as rt,L as de,O as ue,Q as ye,R as ot}from"../chunks/BIkyvSEo.js";import{i as _e,p as lt}from"../chunks/DFETim4E.js";import{a as it}from"../chunks/Hzne13jO.js";function ct(s){const n=new Me.Playlist;return s.forEach(l=>{const r=l.getPlaylistLink();n.links.push(r)}),n}var dt=ne('<svg><path d="M21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function ut(s,n){let l=ae(n,["$$slots","$$events","$$legacy","size"]);var r=dt();oe(r,()=>({...l,width:n.size,height:n.size,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"})),g(s,r)}var ht=ne('<svg><g clip-path="url(#clip0_4_46)"><path d="M205.5 297.333C202.075 297.333 198.864 296.802 195.867 295.74C192.87 294.678 190.087 292.855 187.519 290.269L95.0438 197.794C90.3344 193.084 87.9797 187.091 87.9797 179.813C87.9797 172.534 90.3344 166.541 95.0438 161.831C99.7531 157.122 105.858 154.664 113.359 154.459C120.86 154.253 126.956 156.497 131.648 161.189L179.812 209.353V25.6876C179.812 18.4095 182.278 12.3044 187.21 7.3724C192.142 2.4404 198.239 -0.0170361 205.5 8.88839e-05C212.778 8.88839e-05 218.883 2.46609 223.815 7.39809C228.747 12.3301 231.205 18.4266 231.187 25.6876V209.353L279.352 161.189C284.061 156.48 290.166 154.228 297.667 154.433C305.167 154.639 311.264 157.105 315.956 161.831C320.666 166.541 323.02 172.534 323.02 179.813C323.02 187.091 320.666 193.084 315.956 197.794L223.481 290.269C220.912 292.837 218.13 294.661 215.133 295.74C212.136 296.819 208.925 297.35 205.5 297.333ZM51.375 411C37.2469 411 25.1481 405.965 15.0786 395.896C5.0091 385.826 -0.0170814 373.736 4.36121e-05 359.625V308.25C4.36121e-05 300.972 2.46605 294.867 7.39804 289.935C12.33 285.003 18.4265 282.545 25.6875 282.562C32.9657 282.562 39.0707 285.028 44.0027 289.96C48.9347 294.892 51.3921 300.989 51.375 308.25V359.625H359.625V308.25C359.625 300.972 362.091 294.867 367.023 289.935C371.955 285.003 378.051 282.545 385.312 282.562C392.591 282.562 398.696 285.028 403.628 289.96C408.56 294.892 411.017 300.989 411 308.25V359.625C411 373.753 405.965 385.852 395.896 395.921C385.826 405.991 373.736 411.017 359.625 411H51.375Z"></path></g><defs><clipPath id="clip0_4_46"><rect width="411" height="411"></rect></clipPath></defs></svg>');function gt(s,n){let l=ae(n,["$$slots","$$events","$$legacy","size"]);var r=ht();oe(r,()=>({...l,width:n.size,height:n.size,fill:"currentColor",viewBox:"0 0 411 411",xmlns:"http://www.w3.org/2000/svg"})),g(s,r)}var vt=ne('<svg><path fill-rule="evenodd" clip-rule="evenodd" d="M6.01409 11.5886C6.62899 7.21335 10.6743 4.16497 15.0496 4.77987C19.4249 5.39478 22.4733 9.44012 21.8584 13.8154C21.2435 18.1907 17.1981 21.2391 12.8228 20.6242C11.944 20.5007 11.1206 20.2394 10.3701 19.866C9.87569 19.6199 9.2754 19.8213 9.02937 20.3158C8.78333 20.8102 8.98472 21.4105 9.47917 21.6565C10.4198 22.1246 11.4499 22.4509 12.5445 22.6047C18.0136 23.3733 23.0703 19.5628 23.8389 14.0937C24.6075 8.62465 20.7971 3.56797 15.328 2.79934C9.85886 2.0307 4.80218 5.84119 4.03355 11.3103C4.02368 11.3805 4.01456 11.4507 4.00619 11.5209L2.97388 10.1944C2.63469 9.75851 2.00639 9.68015 1.57054 10.0193C1.13469 10.3585 1.05632 10.9868 1.39551 11.4227L3.74048 14.4359C4.15069 14.963 4.90281 15.0745 5.4483 14.6891L8.61937 12.4485C9.07042 12.1297 9.1777 11.5057 8.859 11.0547C8.54029 10.6036 7.91628 10.4964 7.46523 10.8151L5.98009 11.8644C5.98982 11.7727 6.00114 11.6808 6.01409 11.5886Z" fill="currentColor"></path></svg>');function pt(s,n){let l=ae(n,["$$slots","$$events","$$legacy","size"]);var r=vt();oe(r,()=>({...l,width:n.size,height:n.size,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"})),g(s,r)}var mt=ne('<svg><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.5 11.5 11 14l4-4m6 2a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>');function ft(s,n){let l=ae(n,["$$slots","$$events","$$legacy","size"]);var r=mt();oe(r,()=>({...l,width:n.size,height:n.size,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"})),g(s,r)}function yt(s,n){Z(n,!0);const l=()=>G(le,"$selectedFeeds",r),[r,f]=J(),v=re(n,"variant",3,"default");function y(){const i=Ne().sortBy([c=>c.channel.toLowerCase(),c=>c.getVerticalResolution(),c=>c.url],["asc","desc","asc"]).uniqBy(c=>c.channel+c.feed),o=ct(i),d=p(o.toString());document.body.appendChild(d),d.click(),document.body.removeChild(d)}function p(i){const o=new Blob([i],{type:"text/plain"}),c=(window.URL||window.webkitURL).createObjectURL(o),h=document.createElement("a");return h.setAttribute("download","playlist.m3u"),h.setAttribute("href",c),h}{let i=ke(()=>l().size===0);se(s,{onClick:y,get disabled(){return w(i)},"aria-label":"Download Playlist",title:"Download Playlist",get variant(){return v()},children:(o,d)=>{var c=K(),h=M(c);D(h,()=>gt,(C,_)=>{_(C,{size:16})}),g(o,c)},$$slots:{default:!0}})}E(),f()}function wt(s,n){Z(n,!0);const l=()=>G(le,"$selectedFeeds",r),[r,f]=J(),v=re(n,"variant",3,"default");var y=K(),p=M(y);{var i=o=>{se(o,{get onClick(){return Ue},"aria-label":"Reset",title:"Reset",get variant(){return v()},children:(d,c)=>{var h=K(),C=M(h);D(C,()=>pt,(_,I)=>{I(_,{size:24})}),g(d,h)},$$slots:{default:!0}})};Y(p,o=>{l().size>0&&o(i)})}g(s,y),E(),f()}var Ct=T('<div class="h-10 w-10 flex items-center justify-center text-gray-100"><!></div>');function bt(s,n){Z(n,!0);const l=()=>G(De,"$feeds",v),r=()=>G(Ze,"$searchResultsKeyByChannel",v),f=()=>G(Ee,"$selectedFeedsKeyByChannel",v),[v,y]=J(),p=re(n,"variant",3,"default"),i=l().filter(m=>m.hasStreams());Ce.subscribe(()=>{c()}),le.subscribe(()=>{c()});let o=Q(!1),d=Q(!1);function c(){setTimeout(()=>{const m=i.filter(B=>r().has(B.channel)&&f().has(B.channel)),b=i.filter(B=>r().has(B.channel));A(d,m.length>0&&m.length===b.length,!0)},0)}function h(){A(o,!0),setTimeout(()=>{const m=i.filter(b=>r().has(b.channel));We(m),A(o,!1)},0)}function C(){A(o,!0),setTimeout(()=>{const m=i.filter(b=>r().has(b.channel));Oe(m),A(o,!1)},0)}var _=K(),I=M(_);{var N=m=>{var b=Ct(),B=$(b);D(B,()=>He,(V,P)=>{P(V,{size:21})}),x(b),g(m,b)},F=m=>{var b=K(),B=M(b);{var V=S=>{se(S,{onClick:C,"aria-label":"Deselect All",title:"Deselect All",get variant(){return p()},children:(j,e)=>{var t=K(),a=M(t);D(a,()=>ut,(L,q)=>{q(L,{size:24})}),g(j,t)},$$slots:{default:!0}})},P=S=>{se(S,{onClick:h,"aria-label":"Select All",title:"Select All",get variant(){return p()},children:(j,e)=>{var t=K(),a=M(t);D(a,()=>ft,(L,q)=>{q(L,{size:24})}),g(j,t)},$$slots:{default:!0}})};Y(B,S=>{w(d)?S(V):S(P,!1)},!0)}g(m,b)};Y(I,m=>{w(o)?m(N):m(F,!1)})}g(s,_),E(),y()}var xt=T('<div class="px-2 w-full fixed bottom-10 sm:bottom-20 flex justify-center pointer-events-none"><div class="h-16 px-3 py-3 w-full min-w-[300px] max-w-[calc(100%-16px)] sm:w-[540px] bg-primary-850 rounded-lg pointer-events-auto"><div class="flex justify-between items-center w-full max-w-7xl"><div class="text-sm text-gray-300 font-mono pl-2"> </div> <div class="flex space-x-1 sm:space-x-2 items-center"><!> <!> <!> <!></div></div></div></div>');function $t(s,n){Z(n,!1);const l=()=>G(le,"$selectedFeeds",r),[r,f]=J();_e();var v=xt(),y=$(v),p=$(y),i=$(p),o=$(i);x(i);var d=R(i,2),c=$(d);wt(c,{variant:"dark"});var h=R(c,2);bt(h,{variant:"dark"});var C=R(h,2);yt(C,{variant:"dark"});var _=R(C,2);be(_,{onClick:()=>{xe.set(!1)},variant:"dark"}),x(d),x(p),x(y),x(v),ee(()=>te(o,`${l().size??""} selected`)),g(s,v),E(),f()}function _t(s,n){var l=K(),r=M(l);$e(r,17,()=>n.countries,f=>f.code,(f,v)=>{var y=K(),p=M(y);D(p,()=>Qe,(i,o)=>{o(i,{get country(){return w(v)}})}),g(f,y)}),g(s,l)}var Bt=T('<div class="text-l font-medium text-gray-800 dark:text-white inline-flex items-center">Search syntax</div>'),kt=T("<div><!></div>"),Ft=T('<div class="border-t border-gray-200 dark:border-gray-700 py-5 w-full flex flex-col items-start gap-2 px-5"><!> <div class="px-1"> </div></div>'),St=T('<div class="text-gray-800 dark:text-white pt-2.5 w-full"></div>');function Rt(s,n){const l=re(n,"onClose",3,()=>{}),r=[{query:"cat",result:'Finds channels that have "cat" in their descriptions.'},{query:"cat dog",result:'Finds channels that have "cat" AND "dog" in their descriptions.'},{query:"cat,dog",result:'Finds channels that have "cat" OR "dog" in their descriptions.'},{query:'name:"Nat Geo"',result:'Find channels that have "Nat Geo" in the name.'},{query:"alt_name:חינוכית",result:'Finds channels whose alternative name contains "חינוכית".'},{query:"network:ABC",result:"Finds all channels operated by the ABC Network."},{query:"owner:/^$/",result:"Finds channels that have no owner listed."},{query:"country:GY",result:"Finds all channels that are broadcast from Guyana."},{query:"broadcast_area:c/CV",result:"Finds channels that are broadcast in Cape Verde."},{query:"timezone:Asia/Kabul",result:"Find channels that are broadcast in the time zone Asia/Kabul."},{query:"language:fra",result:"Find channels that are broadcast in French."},{query:"category:news",result:"Finds all the news channels."},{query:"format:1080p",result:"Find channels that are broadcast in 1080p."},{query:"website:/./",result:"Finds channels that have a link to the official website."},{query:"is_nsfw:true",result:"Finds channels marked as NSFW."},{query:"is_closed:true",result:"Finds channels that have been closed."},{query:"is_blocked:true",result:"Finds channels that have been added to our blocklist due to the claim of the copyright holder."},{query:"feeds:>1",result:"Finds channels with more than 1 feed."},{query:"logos:0",result:"Finds channels that do not have a logo."},{query:"streams:<2",result:"Finds channels with less than 2 streams."},{query:"guides:>0",result:"Finds channels that have guides."}];Ye(s,{headerLeft:p=>{var i=Bt();g(p,i)},headerRight:p=>{var i=kt(),o=$(i);be(o,{get onClick(){return l()}}),x(i),g(p,i)},body:p=>{var i=St();$e(i,21,()=>r,o=>o.query,(o,d)=>{var c=Ft(),h=$(c);Je(h,{children:(I,N)=>{he();var F=Fe();ee(()=>te(F,w(d).query)),g(I,F)}});var C=R(h,2),_=$(C,!0);x(C),x(c),ee(()=>te(_,w(d).result)),g(o,c)}),x(i),g(p,i)},$$slots:{headerLeft:!0,headerRight:!0,body:!0}})}function Lt(s,n){Z(n,!1);const{close:l}=we("simple-modal");_e(),Xe(s,{get onClose(){return l},children:(r,f)=>{Rt(r,{get onClose(){return l}})},$$slots:{default:!0}}),E()}async function zt(s={}){const n=s.dataDir||Ie,l=new Pe({dataDir:n});await l.downloadToMemory(),l.loadFromMemory();const r=l.getRawData();return qt(r)}function qt(s){const n=s.feeds.reduce((e,t)=>{const a=new ge(t);return e.set(a.getStreamId(),a),e},new Map),l=Map.groupBy(s.logos.map(e=>new ve(e)),e=>e.channel),r=s.categories.reduce((e,t)=>{const a=new U.Category(t);return e.set(a.id,a),e},new Map),f=s.countries.reduce((e,t)=>{const a=new pe(t);return e.set(a.code,a),e},new Map),v=s.channels.reduce((e,t)=>{const a=new me(t),L=l.get(a.id),q=a.categories.map(O=>r.get(O)),H=f.get(a.country);return a.withLogos(L).withCategories(q).withCountry(H),e.set(a.id,a),e},new Map),y=s.logos.map(e=>{const t=new ve(e);return t.withFeed(n.get(t.getStreamId())).withChannel(v.get(t.channel))}),p=Map.groupBy(y,e=>e.getStreamId()),i=s.languages.reduce((e,t)=>{const a=new U.Language(t);return e.set(a.code,a),e},new Map),o=s.streams.map(e=>{const t=new Ae(e);return t.withChannel(v.get(t.channel)).withFeed(n.get(t.getId())),t}),d=Map.groupBy(o,e=>e.getId()),c=s.guides.map(e=>new Ke(e)),h=Map.groupBy(c,e=>e.getStreamId()),C=s.cities.reduce((e,t)=>{const a=new U.City(t);return e.set(a.code,a),e},new Map),_=s.subdivisions.reduce((e,t)=>{const a=new U.Subdivision(t);return e.set(a.code,a),e},new Map),I=s.regions.reduce((e,t)=>{const a=new U.Region(t);return e.set(a.code,a),e},new Map),N=s.timezones.reduce((e,t)=>{const a=new U.Timezone(t);return e.set(a.id,a),e},new Map),F=s.feeds.map(e=>{const t=new ge(e),a=t.languages.map(k=>i.get(k)).filter(k=>k),L=t.timezones.map(k=>N.get(k)).filter(k=>k),q=p.get(t.getStreamId()),H=d.get(t.getStreamId()),O=h.get(t.getStreamId()),ie=t.broadcast_area.map(k=>{let W;const[Be,X]=k.split("/");switch(Be){case"ct":{const z=C.get(X);W=z?z.name:void 0;break}case"s":{const z=_.get(X);W=z?z.name:void 0;break}case"c":{const z=f.get(X);W=z?z.name:void 0;break}case"r":{const z=I.get(X);W=z?z.name:void 0;break}}return new Ge({code:k}).withName(W)}),ce=new Te({codes:t.broadcast_area}).withLocations(ie),u=v.get(t.channel);return t.withLanguages(a).withTimezones(L).withStreams(H).withGuides(O).withBroadcastArea(ce).withLogos(q).withChannel(u)}),m=Map.groupBy(y,e=>e.channel),b=Map.groupBy(F,e=>e.channel),B=s.blocklist.map(e=>new Ve(e)),V=Map.groupBy(B,e=>e.channel),P=s.channels.map(e=>{const t=new me(e),a=t.categories.map(L=>r.get(L));return t.withLogos(m.get(t.id)).withFeeds(b.get(t.id)).withCategories(a).withCountry(f.get(t.country)).withBlocklistRecords(V.get(t.id))}),S=Map.groupBy(P,e=>e.country);return{countries:s.countries.map(e=>{const t=new pe(e);return t.withChannels(S.get(t.code))}),channels:P,feeds:F}}var Mt=T('<meta name="description" content="iptv-org is user editable database for TV channels"/> <link rel="canonical" href="https://iptv-org.github.io/"/>',1),It=T('<div class="flex items-center justify-center w-full pt-1 pb-6 tracking-tight text-sm text-gray-500 dark:text-gray-400 font-mono">loading...</div>'),Pt=T('<header><!></header> <main class="bg-slate-50 dark:bg-primary-850 min-h-screen min-w-[360px]"><section class="max-w-[960px] mx-auto px-2 pt-16 sm:pt-20 pb-20 overflow-hidden min-h-full"><!> <div class="pt-2 pb-6 flex justify-between px-1"><span class="inline-flex text-sm text-gray-500 dark:text-gray-400 font-mono pt-0.5">Found&nbsp; <span> </span> &nbsp;channel(s)</span> <button type="button" class="inline-flex text-sm text-gray-500 dark:text-gray-400 font-mono hover:underline hover:text-blue-500 dark:hover:text-blue-400 pt-0.5 cursor-pointer">Search syntax</button></div> <!> <!></section></main> <!>',1);function Nt(s,n){Z(n,!0);const l=()=>G(ue,"$query",v),r=()=>G(Ce,"$searchResults",v),f=()=>G(xe,"$downloadMode",v),[v,y]=J(),{open:p}=we("simple-modal");let i=Q(Re([])),o=Q(!0);Le(async()=>{A(o,!0);const u=await zt();A(i,u.countries,!0),rt.init(u),A(o,!1),de()}),it(()=>{const u=lt.url.searchParams.get("q");u?(ue.set(decodeURIComponent(u)),ye(u)):ye(null),!w(o)&&setTimeout(()=>{de()},0)});let d=Q(0);function c(u){u.preventDefault(),p(Lt,{},{transitionBgProps:{duration:0},transitionWindowProps:{duration:0}})}let h;function C(){h&&h.focus()}function _(){ot("q",l()),de()}function I(){ue.set(""),C()}var N=Pt();et("1uha8ag",u=>{var k=Mt();he(2),ze(()=>{qe.title="iptv-org"}),g(u,k)});var F=M(N);let m;var b=$(F);tt(b,{onSearchButtonClick:C}),x(F);var B=R(F,2),V=$(B),P=$(V);je(st(P,{onSubmit:_,onClear:I}),u=>h=u,()=>h);var S=R(P,2),j=$(S),e=R($(j));let t;var a=$(e,!0);x(e),he(),x(j);var L=R(j,2);L.__click=c,x(S);var q=R(S,2);{var H=u=>{var k=It();g(u,k)};Y(q,u=>{w(o)&&u(H)})}var O=R(q,2);_t(O,{get countries(){return w(i)}}),x(V),x(B);var ie=R(B,2);{var ce=u=>{$t(u,{})};Y(ie,u=>{f()&&u(ce)})}ee(u=>{m=fe(F,1,"z-20 w-full min-w-[360px] flex items-center",null,m,{absolute:w(d)<=150,fixed:w(d)>150}),at(F,`top: ${w(d)>150&&w(d)<=210?w(d)-210:0}px`),t=fe(e,1,"",null,t,{"animate-spin":w(o)}),te(a,u)},[()=>w(o)?"/":r().length.toLocaleString()]),nt("y",()=>w(d),u=>A(d,u,!0)),g(s,N),E(),y()}Se(["click"]);export{Nt as component};
